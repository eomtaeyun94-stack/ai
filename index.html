<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI ë°ëª¨ â€” ì˜¤ë¥˜ ì‹ ê³  í¬í•¨</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#60a5fa;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans KR';background:linear-gradient(135deg,#071026 0%,#081124 60%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:1100px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    h1{font-size:1.25rem;margin:0}
    .muted{color:var(--muted);font-size:0.9rem}
    .layout{display:grid;grid-template-columns:1fr 360px;gap:14px}
    .chat{height:520px;overflow:auto;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.02)}
    .msg{max-width:78%;padding:10px 12px;border-radius:10px;margin-bottom:10px;word-break:break-word}
    .user{background:linear-gradient(90deg,#0b1220,#071026);margin-left:auto;border:1px solid rgba(255,255,255,0.03)}
    .ai{background:linear-gradient(90deg,#0b1f33,#06202b);border:1px solid rgba(96,165,250,0.15)}
    .controls{display:flex;gap:8px;margin-top:12px}
    input[type=text]{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#02203a;cursor:pointer;font-weight:600}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}
    .small{font-size:0.85rem;padding:8px 10px;border-radius:8px}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.00));border-radius:10px;padding:12px;border:1px solid rgba(255,255,255,0.02);height:520px;overflow:auto}
    .report-item{padding:10px;border-radius:8px;margin-bottom:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02);cursor:pointer}
    .report-item:hover{transform:translateY(-2px)}
    .meta{font-size:0.85rem;color:var(--muted)}
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center}
    .modal{width:100%;max-width:880px;background:var(--card);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03)}
    .field{margin-bottom:10px}
    label{display:block;font-size:0.9rem;margin-bottom:6px;color:var(--muted)}
    textarea,select{width:100%;padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit;min-height:80px}
    .row{display:flex;gap:8px}
    .tag{font-size:0.8rem;padding:6px 8px;border-radius:999px;background:var(--glass);border:1px dashed rgba(255,255,255,0.02);color:var(--muted)}
    .toast{position:fixed;right:20px;bottom:20px;background:#052033;padding:10px 14px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);display:none}
    footer{display:flex;align-items:center;justify-content:space-between;margin-top:10px;color:var(--muted);font-size:0.9rem}
    .empty{color:var(--muted);font-size:0.95rem;text-align:center;margin-top:36px}
    pre{background:rgba(0,0,0,0.25);padding:10px;border-radius:8px;overflow:auto}
    @media (max-width:1000px){.layout{grid-template-columns:1fr} .panel{height:auto;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div>
          <h1>AI ë°ëª¨</h1>
          <div class="muted">ì˜¤í”„ë¼ì¸ AI + ì˜¤ë¥˜ ì‹ ê³  ì„¼í„°</div>
        </div>
        <div class="row">
          <button class="small ghost" id="open-report">ì˜¤ë¥˜ ì‹ ê³ </button>
          <button class="small" id="open-center">ì‹ ê³  ì„¼í„°</button>
        </div>
      </header>

      <main class="layout">
        <section>
          <div id="chat" class="chat"></div>
          <div class="controls">
            <input id="user-input" type="text" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" />
            <button id="send">ì „ì†¡</button>
          </div>
          <footer>
            <div>ëª¨ë“  ì‹ ê³ ëŠ” ë¡œì»¬ ì €ì¥ì†Œì— ë³´ê´€ë©ë‹ˆë‹¤.</div>
          </footer>
        </section>
        <aside>
          <div class="panel">
            <h3>ìµœê·¼ ëŒ€í™”</h3>
            <div id="recent-list" class="muted">ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
          </div>
        </aside>
      </main>
    </div>
  </div>

  <!-- ì‹ ê³  ëª¨ë‹¬ -->
  <div id="modal" class="modal-backdrop">
    <div class="modal">
      <h2>ì˜¤ë¥˜ ì‹ ê³ </h2>
      <div class="field">
        <label>ë¬¸ì œ ìœ í˜•</label>
        <select id="issue-type">
          <option>UI ì˜¤ë¥˜</option><option>ê¸°ëŠ¥ ë¶ˆê°€</option><option>ì„±ëŠ¥ ëŠë¦¼</option><option>ê¸°íƒ€</option>
        </select>
      </div>
      <div class="field">
        <label>ìƒì„¸ ì„¤ëª…</label>
        <textarea id="issue-desc" placeholder="ì–´ë–¤ ë¬¸ì œê°€ ìˆì—ˆë‚˜ìš”?"></textarea>
      </div>
      <div class="row" style="justify-content:flex-end">
        <button class="ghost small" id="cancel-report">ì·¨ì†Œ</button>
        <button class="small" id="send-report">ì‹ ê³  ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- ì‹ ê³  ì„¼í„° -->
  <div id="center-modal" class="modal-backdrop">
    <div class="modal">
      <h2>ì‹ ê³  ì„¼í„°</h2>
      <div id="report-list" style="max-height:420px;overflow:auto"></div>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
        <button class="ghost small" id="close-center">ë‹«ê¸°</button>
        <button class="small" id="clear-all">ëª¨ë‘ ì‚­ì œ</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
  document.addEventListener('DOMContentLoaded', ()=>{
    const $ = s => document.querySelector(s);
    const chat = $('#chat'), input = $('#user-input'), toast = $('#toast');
    const REPORT_KEY = 'ai_reports_v1';

    function showToast(msg){toast.textContent=msg;toast.style.display='block';setTimeout(()=>toast.style.display='none',2500);}

    function addMsg(text, who='ai'){
      const div=document.createElement('div');
      div.className='msg '+(who==='user'?'user':'ai');
      div.textContent=text;
      chat.appendChild(div);
      chat.scrollTop=chat.scrollHeight;
      const hist=JSON.parse(localStorage.getItem('chat_history')||'[]');
      hist.push({who,text,ts:new Date().toISOString()});
      localStorage.setItem('chat_history',JSON.stringify(hist));
      renderRecent();
    }

    function seed(){
      const hist=JSON.parse(localStorage.getItem('chat_history')||'[]');
      if(hist.length===0) addMsg('ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”? ğŸ˜Š');
      else hist.forEach(m=>addMsg(m.text,m.who));
    }

    function simulateAI(q){
      addMsg(q,'user');
      setTimeout(()=>{
        let a='ì¢‹ì€ ì§ˆë¬¸ì´ì—ìš”! "'+q+'"';
        if(/ì˜¤ë¥˜|ë²„ê·¸/.test(q)) a='ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‚˜ìš”? "ì˜¤ë¥˜ ì‹ ê³ " ë²„íŠ¼ìœ¼ë¡œ ì•Œë ¤ì£¼ì„¸ìš”.';
        addMsg(a,'ai');
      },600);
    }

    $('#send').onclick=()=>{const v=input.value.trim();if(!v)return showToast('ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”');simulateAI(v);input.value='';};
    input.onkeydown=e=>{if(e.key==='Enter'){e.preventDefault();$('#send').click();}};

    $('#open-report').onclick=()=>$('#modal').style.display='flex';
    $('#cancel-report').onclick=()=>$('#modal').style.display='none';
    $('#send-report').onclick=()=>{
      const type=$('#issue-type').value,desc=$('#issue-desc').value.trim();
      if(!desc)return showToast('ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”');
      const list=JSON.parse(localStorage.getItem(REPORT_KEY)||'[]');
      list.unshift({id:Date.now(),type,desc,ts:new Date().toLocaleString()});
      localStorage.setItem(REPORT_KEY,JSON.stringify(list));
      $('#modal').style.display='none';$('#issue-desc').value='';
      showToast('ì‹ ê³ ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    };

    $('#open-center').onclick=()=>{renderReports();$('#center-modal').style.display='flex';};
    $('#close-center').onclick=()=>$('#center-modal').style.display='none';
    $('#clear-all').onclick=()=>{if(confirm('ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ì–´ìš”?')){localStorage.removeItem(REPORT_KEY);renderReports();showToast('ëª¨ë‘ ì‚­ì œë¨');}};

    function renderReports(){
      const list=JSON.parse(localStorage.getItem(REPORT_KEY)||'[]');
      const box=$('#report-list');box.innerHTML='';
      if(list.length===0)return box.innerHTML='<div class="empty">ì‹ ê³  ì—†ìŒ</div>';
      list.forEach(r=>{
        const el=document.createElement('div');
        el.className='report-item';
        el.innerHTML=`<strong>${r.type}</strong><div class="meta">${r.ts}</div><div>${r.desc}</div>`;
        box.appendChild(el);
      });
    }

    function renderRecent(){
      const list=JSON.parse(localStorage.getItem('chat_history')||'[]');
      const r=$('#recent-list');
      if(list.length===0)return r.textContent='ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤.';
      r.innerHTML=list.slice(-5).reverse().map(x=>`<div><strong>${x.who}</strong> <div class="meta">${x.text}</div></div>`).join('');
    }

    seed();renderRecent();
  });
  </script>
</body>
</html>
